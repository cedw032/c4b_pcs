{"version":3,"sources":["hooks/useSocket.js","hooks/useMessenger.js","components/ChatBox.js","components/Button.js","components/LoginBox.js","App.js","index.js"],"names":["socket","io","connect","useSocket","listeners","useEffect","Object","entries","forEach","_ref","_ref2","slicedToArray","name","listener","on","_ref3","_ref4","removeEventListener","useMessenger","username","to","_useState","useState","_useState2","log","setLog","addToLog","message","concat","toConsumableArray","objectSpread","at","moment","from","content","emit","ChatBox","endClient","_useMessenger","_useMessenger2","sendMessage","input","setInput","getMessageClassname","cx","react_default","a","createElement","className","map","format","value","onChange","e","target","onKeyDown","key","Button","props","clicked","setClicked","clearTimeout","assign","onClick","setTimeout","LoginBox","onLogin","error","setError","_useState3","password","_useState4","credentials","setCredentials","credentialsRef","useRef","current","login","components_Button","children","App","setUsername","endClients","setEndClients","i","components_ChatBox","components_LoginBox","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.7cfbadae.chunk.js","sourcesContent":["import {useEffect} from 'react';\nimport io from 'socket.io-client';\n\nconst socket = io.connect('http://localhost:5000');\n//const socket = io.connect( );\n\nconst useSocket = listeners => {\n\tuseEffect(() => {\n\t\tObject.entries(listeners).forEach(([name, listener]) => {\n\t\t\tsocket.on(name, listener);\n\t\t});\t\n\n\t\treturn () => {\n\t\t\tObject.entries(listeners).forEach(([name, listener]) => {\n\t\t\t\tsocket.removeEventListener(name, listener);\n\t\t\t});\t\n\t\t};\n\n\t}, []);\n\n\treturn socket;\n};\n\nexport default useSocket;","import {useState} from 'react';\nimport moment from 'moment';\nimport useSocket from './useSocket';\n\nconst useMessenger = (username, to) => {\n\n\tconst [log, setLog] = useState([]);\n\n\tconst addToLog = message => setLog([\n\t\t...log, \n\t\t{\n\t\t\tat: moment(message.at),\n\t\t\t...message,\n\t\t}\n\t]);\n\n\tconst socket = useSocket({\n\t\tmessage: message => message.from === to && addToLog(message),\n\t});\n\n\tconst sendMessage = content => {\n\n\t\taddToLog({\n\t\t\tcontent,\n\t\t\tat: moment(),\n\t\t\tfrom: username,\n\t\t});\n\n\t\tsocket.emit('message', {\n\t\t\tto,\n\t\t\tcontent,\n\t\t});\n\n\t};\n\n\treturn [log, sendMessage]\n};\n\nexport default useMessenger;","import React, {useState} from 'react';\nimport cx from 'classnames';\nimport useMessenger from '../hooks/useMessenger';\n\nconst ChatBox = ({username, endClient}) => {\n\n\tconst [log, sendMessage] = useMessenger(username, endClient);\n\n\tconst [input, setInput] = useState('');\n\n\tconst getMessageClassname = (message) => cx(\n\t\t'message',\n\t\tmessage.from === username && 'self',\n\t\tmessage.from !== username && 'peer',\n\t);\n\n\treturn (\n\t\t<div className='panel'>\n\t\t\t<div>\n\t\t\tusername: {username}\n\t\t\t</div>\n\t\t\t<div className='panel message-box'>\n\t\t\t\t{log.map(message => \n\t\t\t\t\t<div className={getMessageClassname(message)}>\n\t\t\t\t\t\t<span>{message.at.format('h:mma')} - </span>\n\t\t\t\t\t\t<span>{message.from}: </span>\n\t\t\t\t\t\t<span>{message.content}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<input \n\t\t\t\t\tvalue={input} \n\t\t\t\t\tonChange={e => setInput(e.target.value)}\n\t\t\t\t\tonKeyDown={e => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\tsendMessage(input);\n\t\t\t\t\t\t\tsetInput('');\n\t\t\t\t\t\t}\n\t\t\t\t\t}}/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\n\t);\n}\n\nexport default ChatBox;","import React, {useState, useEffect} from 'react';\nimport cx from 'classnames';\n\nconst Button = (props) => {\n\tconst [clicked, setClicked] = useState(false);\n\n\tconst clickDuration = 140;\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (clicked) clearTimeout(clicked);\t\t\n\t\t};\n\t}, [clicked]);\n\n\treturn (\n\n\t\t<button {...props}\n\t\t\tonClick={(e) => {\n\t\t\t\tif (props.onClick) props.onClick();\n\n\t\t\t\tif (clicked) clearTimeout(clicked);\n\n\t\t\t\tsetClicked(setTimeout(() => {\n\t\t\t\t\tsetClicked(false);\n\t\t\t\t}, clickDuration));\n\t\t\t}}\n\t\t\tclassName={cx(\n\t\t\t\tprops.className,\n\t\t\t\tclicked && 'clicked'\n\t\t\t)}/>\n\t);\n};\n\nexport default Button;\n\n","import React, {useState, useRef} from 'react';\nimport useSocket from '../hooks/useSocket';\nimport Button from './Button'\n\nconst LoginBox = ({onLogin}) => {\n\n\tconst [error, setError] = useState();\n\tconst [credentials, setCredentials] = useState({\n\t\tusername: '',\n\t\tpassword: '',\n\t});\n\n\tconst credentialsRef = useRef();\n\tcredentialsRef.current = credentials;\n\n\tconst socket = useSocket({\n\t\tlogin: (error) => {\n\t\t\tif (!error) { \n\t\t\t\tconst credentials = credentialsRef.current;\n\t\t\t\tonLogin(credentials.username);\t\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetError(error);\n\t\t}\n\t});\n\n\tconst {\n\t\tusername,\n\t\tpassword,\n\t} = credentials;\n\n\treturn (\n\t\t<div className='panel'>\n\t\t\t{error &&\n\t\t\t\t<span className='error'>{error}</span>\n\t\t\t}\n\t\t\t<div className='row'>\n\t\t\t\t<span>username</span>\n\t\t\t\t<input \n\t\t\t\t\tvalue={username} \n\t\t\t\t\tonChange={e => setCredentials({\n\t\t\t\t\t\tusername: e.target.value,\n\t\t\t\t\t\tpassword,\n\t\t\t\t\t})}/>\n\t\t\t</div>\n\t\t\t<div className='row'>\n\t\t\t\t<span>password</span>\n\t\t\t\t<input \n\t\t\t\t\tvalue={password} \n\t\t\t\t\tonChange={e => setCredentials({\n\t\t\t\t\t\tusername,\n\t\t\t\t\t\tpassword: e.target.value,\n\t\t\t\t\t})}/>\n\t\t\t</div>\n\t\t\t<Button \n\t\t\t\tchildren='Login'\n\t\t\t\tonClick={() => {\n\t\t\t\t\tsocket.emit(\n\t\t\t\t\t\t'login',\n\t\t\t\t\t\t{username, password}\n\t\t\t\t\t);\n\t\t\t\t}}/>\n\t\t</div>\n\t); \n}\n\nexport default LoginBox;","import React, {useState} from 'react';\n\nimport useSocket from './hooks/useSocket';\nimport ChatBox from './components/ChatBox'\nimport LoginBox from './components/LoginBox';\n\nimport './App.css';\n\nfunction App() {\n\n\tconst [username, setUsername] = useState('');\n\n\tconst [endClients, setEndClients] = useState([]);\n\tuseSocket({\n\t\tendClients: setEndClients,\n\t});\n\n\tif (!username) {\n\t\treturn (\n\t\t\t<LoginBox onLogin={setUsername}/>\n\t\t);\n\t} \n\n\treturn (\n\t\t<div className='app'>\n\t\t\t<div className='panel'>\n\t\t\t\t{endClients.map((endClient, i) => \n\t\t\t\t\t<ChatBox\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tusername={username}\n\t\t\t\t\t\tendClient={endClient}/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}