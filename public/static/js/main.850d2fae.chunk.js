(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(66)},38:function(e,t,n){},61:function(e,t){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),u=n.n(c),o=(n(38),n(1)),s=n(31),i=n.n(s).a.connect(),l=function(e){return Object(a.useEffect)(function(){return Object.entries(e).forEach(function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];i.on(n,a)}),function(){Object.entries(e).forEach(function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];i.removeEventListener(n,a)})}},[]),i},m=n(8),f=n.n(m),b=n(32),v=n(9),O=n.n(v),p={},E=function(e,t,n){var a=p[e];return a&&clearTimeout(a),p[e]=setTimeout(function(){t(),p[e]=void 0},n),p[e]},j=function(e,t){var n=Object(a.useState)(t),r=Object(o.a)(n,2),c=r[0],u=r[1];Object(a.useEffect)(function(){try{var t=JSON.parse(localStorage.getItem(e));t&&u(t)}catch(n){console.error(n)}},[]);var s=Object(a.useRef)();s.current=c;var i=function(){localStorage.setItem(e,JSON.stringify(s.current))};return E(e,i,3e3),Object(a.useEffect)(function(){return i},[]),[c,u]},d=function(e,t){var n=j("messenger-log-".concat(e,"-").concat(t),[]),r=Object(o.a)(n,2),c=r[0],u=r[1],s=Object(a.useRef)();s.current=c;var i=function(e){return u([].concat(Object(b.a)(s.current),[e]))},m=l({message:function(e){(e.from==t||e.isBusiness)&&i(e)}});return[c,function(n){i({content:n,at:O()().toISOString(),from:e}),m.emit("message",{to:t,content:n})}]},g=function(e){var t=e.username,n=e.endClient,c=d(t,n),u=Object(o.a)(c,2),s=u[0],i=u[1],l=Object(a.useState)(""),m=Object(o.a)(l,2),b=m[0],v=m[1],p=function(e){return f()("message",e.from===t&&"self",e.from!==t&&"peer")};return r.a.createElement("div",{className:"panel message-box"},s.map(function(e,t){return r.a.createElement("div",{key:t,className:p(e)},r.a.createElement("span",null,O()(e.at).format("h:mma")," - "),r.a.createElement("span",null,e.from,": "),r.a.createElement("span",null,e.content))}),r.a.createElement("input",{value:b,onChange:function(e){return v(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(i(b),v(""))}}))},w=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],u=n[1];return Object(a.useEffect)(function(){return function(){c&&clearTimeout(c)}},[c]),r.a.createElement("button",Object.assign({},e,{onClick:function(t){e.onClick&&e.onClick(),c&&clearTimeout(c),u(setTimeout(function(){u(!1)},140))},className:f()(e.className,c&&"clicked")}))},S=function(e){var t=e.onLogin,n=Object(a.useState)(),c=Object(o.a)(n,2),u=c[0],s=c[1],i=Object(a.useState)({username:"",password:""}),m=Object(o.a)(i,2),f=m[0],b=m[1],v=Object(a.useRef)();v.current=f;var O=l({login:function(e){if(e)s(e);else{var n=v.current;t(n.username)}}}),p=f.username,E=f.password;return r.a.createElement("div",{className:"panel"},u&&r.a.createElement("span",{className:"error"},u),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"username"),r.a.createElement("input",{value:p,onChange:function(e){return b({username:e.target.value,password:E})}})),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"password"),r.a.createElement("input",{value:E,onChange:function(e){return b({username:p,password:e.target.value})}})),r.a.createElement(w,{children:"Login",onClick:function(){O.emit("login",{username:p,password:E})}}))};n(65);var N=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)([]),s=Object(o.a)(u,2),i=s[0],m=s[1];return l({endClients:m}),n?r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"panel"},i.map(function(e,t){return r.a.createElement(g,{key:t,username:n,endClient:e})}))):r.a.createElement(S,{onLogin:c})};u.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.850d2fae.chunk.js.map